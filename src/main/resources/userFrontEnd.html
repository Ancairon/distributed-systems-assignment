<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Front End</title>
</head>
<body>


<h1 style="font-size:300%; color:black">Citizen Page</h1>

<div class="rendered-form">

    <label for="serialnumber">Serial Number</label>
    <input type="text" placeholder="Serial Number" access="false" id="serialnumber" required="required">

    <br>

    <label for="breed">Pet's Breed</label>
    <input type="text" placeholder="Breed" access="false" id="breed" required="required">
    <br>

    <label for="gender">Pet's Gender</label>
    <input type="text" placeholder="Gender" access="false" id="gender" required="required">
    <br>

    <label for="birthdate">Birthdate</label>
    <input type="text" placeholder="dd/mm/yyyy" access="false" id="birthdate" required="required">

</div>

<br>
<input type="button" id="newPet" value='insert a new pet'>


</body>


<script type="text/javascript">

    //INSERT NEW PET


    window.addEventListener('load', (event) => {
        document.getElementById('newPet').addEventListener('click', (event) => {

            const Pet = {
                'id': document.getElementById('serialnumber').value,
                'breed': document.getElementById('breed').value,
                'gender': document.getElementById('gender').value,
                'birthdate': document.getElementById('birthdate').value
            };
            const xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:8080/pets/new', true);
            xhr.setRequestHeader('Content-type', 'application/json');
            xhr.send(JSON.stringify(Pet));
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        alert("Success!");
                    }
                }
            };
        });
    });


</script>

</html>

